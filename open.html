<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Train Game with Auto-Suggest</title>
  <style>
    #suggestions {
      position: absolute;
      background-color: white;
      border: 1px solid #ccc;
      max-height: 200px;
      overflow-y: auto;
      width: 300px;
      z-index: 1000;
      display: none; /* Initially hidden */
    }
    #suggestions div {
      padding: 10px;
      cursor: pointer;
    }
    #suggestions div:hover {
      background-color: #f1f1f1;
    }
    #stationSearch {
      padding: 10px;
      width: 300px;
    }
  </style>
</head>
<body>
  <h2>Select a Station</h2>
  <input type="text" id="stationSearch" placeholder="Start typing a station name..." oninput="filterStations()">
  <div id="suggestions"></div>

  <script>
    // Seznam linek s jejich stanicemi
    const lines = [
      {
        name: "Trať 313 Milotice nad Opavou – Vrbno pod Pradědem",
        stops: [
          { name: "Milotice nad Opavou", location: [50.0142556, 17.5576706] },
          { name: "Nové Heřminovy", location: [50.0247269, 17.5268556] },  
          { name: "Kunov", location: [50.0372772, 17.5159339] },
          { name: "Skrbovice", location: [50.0520972, 17.4844189] },  
          { name: "Široká Niva", location: [50.0666161, 17.4733792] },
          { name: "Pocheň", location: [50.0751228, 17.4480647] },  
          { name: "Karlovice", location: [50.1049919, 17.4392242] },
          { name: "Karlovice zastávka", location: [50.1075553, 17.4276428] },   
          { name: "Vrbno pod Pradědem zastávka", location: [50.1142922, 17.3979511] },
          { name: "Vrbno pod Pradědem", location: [50.1179047, 17.3880025] }
        ]
      },
      // Další linky zde...
    ];

    // Vytvoříme seznam všech stanic ve hře
    const allStations = [];
    lines.forEach(line => {
      line.stops.forEach(stop => {
        allStations.push(stop.name);
      });
    });

    // Filtrování stanic podle vstupu uživatele
    function filterStations() {
      const query = document.getElementById('stationSearch').value.toLowerCase();
      const filteredStations = allStations.filter(station => station.toLowerCase().includes(query));

      // Zobrazí návrhy
      showSuggestions(filteredStations);
    }

    // Zobrazení návrhů
    function showSuggestions(stations) {
      const suggestionsDiv = document.getElementById('suggestions');
      suggestionsDiv.innerHTML = ''; // Clear previous suggestions

      if (stations.length === 0) {
        suggestionsDiv.style.display = 'none'; // Hide if no matches
        return;
      }

      suggestionsDiv.style.display = 'block'; // Show if there are matches
      stations.forEach(station => {
        const div = document.createElement('div');
        div.textContent = station;
        div.onclick = () => selectStation(station); // When a station is clicked
        suggestionsDiv.appendChild(div);
      });
    }

    // Vybere stanici
    function selectStation(station) {
      document.getElementById('stationSearch').value = station;
      document.getElementById('suggestions').style.display = 'none'; // Hide suggestions
      alert(`You selected: ${station}`);
    }

    // Zavření návrhů, když klikneme mimo input
    document.addEventListener('click', (e) => {
      if (!e.target.closest('#stationSearch')) {
        document.getElementById('suggestions').style.display = 'none';
      }
    });
  </script>
</body>
</html>
